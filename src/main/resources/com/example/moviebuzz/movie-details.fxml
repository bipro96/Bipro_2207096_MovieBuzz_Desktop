<?xml version="1.0" encoding="UTF-8"?>
<?import javafx.scene.control.*?>
<?import javafx.scene.image.*?>
<?import javafx.scene.layout.*?>
<?import javafx.scene.text.*?>

<VBox alignment="TOP_CENTER" spacing="15.0" style="-fx-background-color: #121212; -fx-padding: 20;" xmlns="http://javafx.com/javafx/21" xmlns:fx="http://javafx.com/fxml/1" fx:controller="com.example.moviebuzz.MovieDetailsController">
    <children>
        <HBox alignment="CENTER_RIGHT">
            <Label fx:id="balanceLabel" text="Balance: BDT 0.00" textFill="#27ae60">
                <font><Font name="System Bold" size="22.0" /></font>
            </Label>
        </HBox>

        <HBox spacing="40.0"> <children>
            <VBox spacing="15.0" minWidth="240.0">
                <children>
                    <ImageView fx:id="detailPoster" fitHeight="350.0" fitWidth="240.0" pickOnBounds="true" preserveRatio="true">
                        <image><Image url="@placeholder.png" /></image>
                    </ImageView>

                    <VBox fx:id="historyUI" managed="false" visible="false" spacing="5">
                        <children>
                            <Label fx:id="lblTickets" text="Purchased: 0 ticket(s)" textFill="WHITE">
                                <font><Font size="16.0" /></font>
                            </Label>
                            <Label fx:id="lblBookingID" text="ID: #0" textFill="GRAY" />
                            <Label fx:id="lblDateTime" text="Show: Date @ Time" textFill="GRAY" />
                            <Label fx:id="lblTotalPaid" text="Total: BDT 0.00" textFill="#00d2ff" style="-fx-font-weight: bold;" />
                        </children>
                    </VBox>
                </children>
            </VBox>

            <VBox spacing="10.0" HBox.hgrow="ALWAYS">
                <children>
                    <Label fx:id="detailTitle" text="Movie Title" textFill="WHITE">
                        <font><Font name="System Bold" size="32.0" /></font>
                    </Label>
                    <Label fx:id="detailGenre" text="Genre | Duration" textFill="#00d2ff">
                        <font><Font size="16.0" /></font>
                    </Label>

                    <Separator opacity="0.1" prefWidth="200.0" />

                    <Label text="Available Showtimes" textFill="WHITE">
                        <font><Font name="System Bold" size="18.0" /></font>
                    </Label>

                    <TableView fx:id="showTable" prefHeight="200.0" prefWidth="380.0" maxWidth="400.0">
                        <columns>
                            <TableColumn fx:id="colDate" prefWidth="120.0" text="Date" />
                            <TableColumn fx:id="colTime" prefWidth="120.0" text="Time" />
                            <TableColumn fx:id="colPrice" prefWidth="120.0" text="Price (BDT)" />
                        </columns>
                        <columnResizePolicy>
                            <TableView fx:constant="CONSTRAINED_RESIZE_POLICY" />
                        </columnResizePolicy>
                    </TableView>

                    <HBox alignment="CENTER_RIGHT" spacing="15.0">
                        <children>
                            <HBox alignment="CENTER_LEFT" spacing="8.0">
                                <children>
                                    <Label text="Qty:" textFill="WHITE">
                                        <font><Font size="16.0" /></font>
                                    </Label>
                                    <Spinner fx:id="ticketSpinner" prefHeight="30.0" prefWidth="90.0" />
                                </children>
                            </HBox>
                            <Button fx:id="btnConfirm" onAction="#handleConfirmBooking" prefHeight="40.0" prefWidth="180.0"
                                    style="-fx-background-color: #56ccf2; -fx-text-fill: black; -fx-font-weight: bold; -fx-background-radius: 5;" text="Confirm Purchase" />
                        </children>
                    </HBox>

                    <HBox alignment="CENTER_RIGHT">
                        <children>
                            <Label fx:id="statusLabel" textFill="RED" />
                            <Region HBox.hgrow="ALWAYS" />
                            <Button onAction="#handleBack" prefHeight="35.0" prefWidth="100.0"
                                    style="-fx-background-color: #333333; -fx-text-fill: white; -fx-background-radius: 5;" text="Back" />
                        </children>
                    </HBox>
                </children>
            </VBox>
        </children>
        </HBox>
    </children>
</VBox>